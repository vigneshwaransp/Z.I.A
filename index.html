<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Z.I.A â€“ Gemini</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  html, body {
  height: 100%; 
  margin: 0; 
  font-family: 'Inter', sans-serif;
  background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQMtgLNr3gI8XhkbftYa9JogtbB3Y5TwyxbvpCKwN2-7EK-v1FZVHfpPHg8wv72d20K1iI&usqp=CAU');
  background-size: cover;       /* Make it cover the screen */
  background-repeat: no-repeat; /* Prevent repetition */
  background-position: center;  /* Center the image */
}

/* Glass effect overlay with increased opacity */
.glass {
  width: 100%; 
  height: 100vh;
  background: rgba(0,0,0,0.5); /* increased from 0.2 to 0.5 */
  backdrop-filter: blur(12px);
  display: flex; 
  flex-direction: column;
}

  /* Gradient Gemini Logo */
  .gemini-logo {
  background: rgb(255, 255, 255); /* your red color */
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  font-weight: 800;
  font-size: 3rem; /* increased size */
  text-align: center; /* center text horizontally */
  width: 100%; /* make it take full width for centering */
  display: block; /* ensures text-align works */
}

  /* Bot bubble gradient */
  .bubble-gemini {
    background: linear-gradient(90deg, #4285F4, #EA4335, #FBBC05, #34A853);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 600;
  }

  /* Input field style */
  input#prompt {
    color: #fff;
  }

  /* Transparent header */
  header {
    background: transparent;
    border-bottom: none;
  }
</style>
</head>
<body>
<div class="glass">

  <!-- Header -->
  <header class="sticky top-0 z-20 backdrop-blur">
    <div class="max-w-4xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="gemini-logo">Z.I.A</h1>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 max-w-4xl mx-auto px-4 py-6 flex flex-col gap-4">

    <!-- Chat Card -->
    <section class="rounded-2xl p-[1px] relative z-10 border border-white/10 bg-black/20 flex flex-col h-[70vh]">
      <div id="chat" class="rounded-2xl p-5 sm:p-6 flex-1 flex flex-col gap-3 overflow-y-auto"></div>

      <form id="composer" class="mt-3 flex gap-3">
        <input id="prompt" type="text" placeholder="Ask me somethingâ€¦" autocomplete="off"
               class="flex-1 bg-black/30 rounded-xl px-4 py-3 outline-none ring-1 ring-white/20 focus:ring-white/30" autofocus />
        <button type="submit" class="px-5 py-3 rounded-xl font-semibold bg-black/30 text-white hover:bg-black/40 transition">
          Send
        </button>
      </form>
    </section>

  </main>
</div>

<!-- Message Template -->
<template id="msg">
  <div class="flex items-start gap-3">
    <div class="shrink-0 w-8 h-8 rounded-xl grid place-items-center font-bold text-sm" data-role="avatar"></div>
    <div class="max-w-[85%] rounded-2xl px-4 py-3 text-sm leading-relaxed" data-role="bubble"></div>
  </div>
</template>

<script>
const $ = (sel, el=document) => el.querySelector(sel);
const chat = $('#chat');
const tpl = $('#msg');

function addMessage(text, who='bot', typing=false) {
  const node = tpl.content.firstElementChild.cloneNode(true);
  const avatar = node.querySelector('[data-role="avatar"]');
  const bubble = node.querySelector('[data-role="bubble"]');

  if (who === 'user') {
    avatar.textContent = 'You';
    avatar.className = 'shrink-0 w-8 h-8 rounded-xl grid place-items-center font-bold text-sm bg-white/20';
    bubble.className = 'max-w-[85%] rounded-2xl px-4 py-3 text-sm bg-black/20 border border-white/20 text-white';
    bubble.textContent = text;
  } else {
    avatar.textContent = 'Z';
    avatar.className = 'shrink-0 w-8 h-8 rounded-xl grid place-items-center font-bold text-sm bg-black/20';
    bubble.className = 'max-w-[85%] rounded-2xl px-4 py-3 text-sm bubble-gemini';
    if (typing) {
      bubble.textContent = '';
      let index = 0;
      const interval = setInterval(() => {
        if (index < text.length) {
          bubble.textContent += text[index++];
          chat.scrollTop = chat.scrollHeight;
        } else {
          clearInterval(interval);
        }
      }, 25);
    } else {
      bubble.textContent = text;
    }
  }
  chat.appendChild(node);
  chat.scrollTop = chat.scrollHeight;
}

// Initial greeting
addMessage("Hey! I'm Z.I.A (Gemini) Ask me questions â€” I'll use DuckDuckGo for answers ðŸš€");

async function localAnswer(text) {
  const now = new Date();
  if (/time|clock|current time/i.test(text)) return `It's ${now.toLocaleTimeString()}.`;
  if (/date|today/i.test(text)) return `Today is ${now.toLocaleDateString()}.`;
  if (/day of week|what day/i.test(text)) return `It's ${now.toLocaleDateString(undefined,{ weekday:'long' })}.`;

  const cleaned = text.replace(/[^0-9+\-*/(). ]/g, '');
  if (cleaned.match(/[0-9][0-9+\-*/(). ]+/)) {
    try { const out = Function(`"use strict"; return (${cleaned})`)(); if (typeof out==='number' && isFinite(out)) return `${cleaned} = ${out}`; } catch {}
  }

  try {
    const url = `https://api.duckduckgo.com/?q=${encodeURIComponent(text)}&format=json&no_redirect=1&no_html=1`;
    const res = await fetch(url);
    const data = await res.json();

    if (data.AbstractText && data.AbstractText.length > 0) return data.AbstractText;
    if (data.RelatedTopics && data.RelatedTopics.length > 0) {
      const topic = data.RelatedTopics[0];
      if (topic.Text) return topic.Text;
      if (topic.Topics && topic.Topics.length > 0) return topic.Topics[0].Text;
    }

  } catch (err) {
    return "Error fetching from DuckDuckGo API.";
  }

  return "I couldn't find an answer. Try another question.";
}

$('#composer').addEventListener('submit', async (e) => {
  e.preventDefault();
  const input = $('#prompt');
  const text = input.value.trim();
  if (!text) return;
  addMessage(text, 'user');
  input.value = '';

  addMessage('â€¦', 'bot', false); // placeholder
  const last = chat.lastElementChild;
  const bubble = last.querySelector('[data-role="bubble"]');

  const reply = await localAnswer(text);
  bubble.textContent = '';
  addMessage(reply, 'bot', true);
});

$('#prompt').addEventListener('keydown', (e) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    $('#composer').requestSubmit();
  }
});
</script>
</body>
</html>
